<!doctype html><html><head><link rel=stylesheet href=https://hybrid-cloud-patterns.io/sass/patternfly.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://hybrid-cloud-patterns.io/sass/patternfly-addons.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/solid.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/fontawesome.css><title>Medical Diagnosis | Hybrid Cloud Patterns</title></head><body><div class=pf-c-page><header class=pf-c-page__header><div class=pf-c-page__header-brand><a href=/ class=pf-c-page__header-brand-link><img src=/images/hybrid_cloud_patterns.png alt="Hybrid Cloud Patterns"></a></div><div class=pf-c-page__header-tools><nav class="pf-c-nav pf-m-horizontal" role=navigation><ul class=pf-c-nav__list><li class=pf-c-nav__item><a class=pf-c-nav__link href=/patterns/ title=Patterns>Patterns</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/learn/ title=Learn>Learn</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/contribute/ title=Contribute>Contribute</a></li><li class="pf-c-nav__item pf-m-current"><a class=pf-c-nav__link href=/blog/ title=Blog>Blog</a></li></ul></nav></div></header><div class=pf-c-page__sidebar><div class=pf-c-page__sidebar-body><div class=pf-c-nav><ul class=pf-c-nav__list><li class=pf-c-nav__item><a href=/blog/ class=pf-c-nav__link><span class="pf-c-icon pf-m-md pf-m-inline"><span class=pf-c-icon__content><i class="fas fa-angle-left" aria-hidden=true></i></span></span>
<span style=padding-left:10px>Back to Blog</span></a></li></ul></div></div></div><main class=pf-c-page__main><section class=pf-c-page__main-section><div class="pf-l-grid pf-m-gutter"><div class="pf-l-grid__item pf-m-8-col"><div class=pf-c-content><h1>Medical Diagnosis</h1><div style="margin:10px 0">by Jonny Rickard</div><div style="margin:10px 0">December 31, 2021</div><div style="margin:20px 0"><span class="pf-c-label pf-m-orange"><span class=pf-c-label__content>medical-diagnosis</span></span>
<span class="pf-c-label pf-m-orange"><span class=pf-c-label__content>xray</span></span>
<span class="pf-c-label pf-m-orange"><span class=pf-c-label__content>validated-pattern</span></span></div><hr class=pf-c-divider><h1 id=validated-pattern-medical-diagnosis>Validated Pattern: Medical Diagnosis</h1><p>Our team recently completed the development of a validated pattern that showcases the capabilities we have at our fingertips when we combine OpenShift and other cutting edge Red Hat technologies to deliver a solution.</p><p>We&rsquo;ve taken an application defined imperatively in an Ansible playbook and converted it into GitOps style declarative kubernetes resources. Using the validated pattern framework we are able to deploy, manage and integrate with multiple cutting edge Red Hat technologies, and provide a capability that the initial deployment strategy didn&rsquo;t have available to it: a lifecycle. Everything you need to take this pattern for a spin is in <a href=https://github.com/hybrid-cloud-patterns/medical-diagnosis>git</a>.</p><h2 id=pattern-workflow>Pattern Workflow</h2><p>The purpose of this pattern is to show how medical facilities can take full advantage of trained AI/ML models to identify anomalies in the body like pneumonia. From the medical personnel point of view it works with medical imagery equipment submitting an X-ray image into the application to start the workflow.</p><p>The image is uploaded to an S3-compatible object storage. This upload triggers an event from the storage, “a new image has been uploaded”, that is sent into a Kafka topic. This topic is consumed by a KNative Eventing listener that triggers the launch of a KNative Serving instance. This instance is a containerimage with the AI/ML model and the needed processing functions. Based on the information from the event it received, the container retrieves the image from the object store, pre-processes it, makes a prediction on the risk of pneumonia using the AI/ML model, and saves the result. A notification of those results is sent to the medical staff as well.</p><p><a href=https://hybrid-cloud-patterns.io/images/medical-edge/physical-dataflow.png><img src=https://hybrid-cloud-patterns.io/images/medical-edge/physical-dataflow.png alt=physical-dataflow></a></p><p>For a recorded demo deploying the pattern and seeing the dashboards available to the user, check out our <a href=https://hybrid-cloud-patterns.io/medical-diagnosis/>docs page</a>!</p><h2 id=pattern-deployment>Pattern Deployment</h2><hr><p>To deploy this pattern, follow the instructions outlined on the <a href=https://hybrid-cloud-patterns.io/medical-diagnosis/getting-started/>getting-started</a> page.</p><h3 id=whats-happening>What&rsquo;s happening?</h3><hr><p>During the bootstrapping of the pattern, the initial <code>openshift-gitops</code> operator is deployed with the necessary custom resource definitions, and custom resources to deploy the
<code>datacenter-&lt;validated-pattern></code> with references to the appropriate git repository and branch. Once the argoCD application deploys it will create all of the <code>common</code> resources
which include <code>advanced cluster manager</code>, <code>vault</code>, and <code>openshift-gitops</code>. The pattern deployment begins with argo applying the helm templates to the cluster, ultimately resulting in all resources
deploying and the <code>xraylab</code> dashboard being available via its route.</p><p>The charts for the pattern deployment are located: <code>$GIT_REPO_DIR/charts/datacenter/</code></p><h3 id=pattern-deployed-technology>Pattern Deployed Technology</h3><hr><table><thead><tr><th style=text-align:center>Operator</th><th>Upstream Project</th></tr></thead><tbody><tr><td style=text-align:center>openshift data foundation (odf)</td><td>ceph, rook, noobaa</td></tr><tr><td style=text-align:center>openshift-gitops</td><td>argoCD</td></tr><tr><td style=text-align:center>openshift serverless</td><td>knative</td></tr><tr><td style=text-align:center>amq streams</td><td>kafka</td></tr><tr><td style=text-align:center>opendatahub</td><td>opendatahub</td></tr><tr><td style=text-align:center>grafana</td><td>grafana</td></tr></tbody></table><h2 id=challenges>Challenges</h2><hr><p>With the imperative dependence on the originating content, there were some resources that didn&rsquo;t align 1:1 and needed to be overcome.
For example, there are a number of tasks that are interrogating the cluster for information to transform into a variable and finally
apply that variable to some resource. As you can imagine, this can be very challenging when you&rsquo;re declaring the state of your cluster. In order to
maneuver around these imperative actions we took what we could and created openshift jobs to execute the task.</p><h2 id=conclusion>Conclusion</h2><hr><p>Speed, accuracy, efficiency all come to mind when considering what this pattern provides. Patients get the treatment they need, when they need it because we&rsquo;re able to use technology to quickly and accurately diagnosis anomalies detected in X-rays. The validated patterns framework enables administrators to quickly meet their user demands by providing solutions that only require them to bring their own data to complete the last 20-25% of the architecture.</p></div></div><aside class="pf-l-grid__item pf-m-4-col pf-c-jump-links pf-m-vertical sticky pf-m-expandable pf-m-non-expandable-on-2xl" aria-label="Table of contents"><div class=pf-c-jump-links__header><div class=pf-c-jump-links__label><h1>Table of Contents</h1></div></div><nav id=TableOfContents><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#validated-pattern-medical-diagnosis>Validated Pattern: Medical Diagnosis</a><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#pattern-workflow>Pattern Workflow</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#pattern-deployment>Pattern Deployment</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#challenges>Challenges</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#conclusion>Conclusion</a></li></ul></li></ul></nav></aside></div></section><footer id=footer class="footer-dark pf-m-no-fill pf-l-flex footer-center"><div class=pf-l-flex__item><a href=//www.redhat.com target=top aria-label="Visit Red Hat.com"><img src=/images/RHlogo.svg alt="Red Hat logo" width=145px height=613px></a><span class=site-copyright>Copyright &copy; 2023 Red Hat, Inc.</span></div></footer></main></div></body></html>