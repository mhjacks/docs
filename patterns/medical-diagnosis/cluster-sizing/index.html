<!doctype html><html><head><link rel=stylesheet href=https://hybrid-cloud-patterns.io/sass/patternfly.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://hybrid-cloud-patterns.io/sass/patternfly-addons.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/solid.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/fontawesome.css><title>Cluster Sizing | Hybrid Cloud Patterns</title></head><body><div class=pf-c-page><header class=pf-c-page__header><div class=pf-c-page__header-brand><a href=/ class=pf-c-page__header-brand-link><img src=/images/hybrid_cloud_patterns.png alt="Hybrid Cloud Patterns"></a></div><div class=pf-c-page__header-tools><nav class="pf-c-nav pf-m-horizontal" role=navigation><ul class=pf-c-nav__list><li class="pf-c-nav__item pf-m-current"><a class=pf-c-nav__link href=/patterns/ title=Patterns>Patterns</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/learn/ title=Learn>Learn</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/contribute/ title=Contribute>Contribute</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/blog/ title=Blog>Blog</a></li></ul></nav></div></header><div class=pf-c-page__sidebar><div class=pf-c-page__sidebar-body><div class=pf-c-nav><ul class=pf-c-nav__list><li class=pf-c-nav__item><a href=/patterns/ class=pf-c-nav__link><span class="pf-c-icon pf-m-md pf-m-inline"><span class=pf-c-icon__content><i class="fas fa-angle-left" aria-hidden=true></i></span></span>
<span style=padding-left:10px>Back to Patterns</span></a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/medical-diagnosis/ class=pf-c-nav__link>Medical Diagnosis</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/medical-diagnosis/getting-started/ class=pf-c-nav__link>Getting Started</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/medical-diagnosis/cluster-sizing/ class="pf-c-nav__link pf-m-current">Cluster Sizing</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/medical-diagnosis/troubleshooting/ class=pf-c-nav__link>Troubleshooting Guide</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/medical-diagnosis/ideas-for-customization/ class=pf-c-nav__link>Ideas for Customization</a></li></ul></div></div></div><main class=pf-c-page__main><section class=pf-c-page__main-section><div class="pf-l-grid pf-m-gutter"><div class="pf-l-grid__item pf-m-8-col"><div class=pf-c-content><div class=pf-c-content><h1 id=openshift-cluster-sizing-for-the-medical-diagnosis-pattern>OpenShift Cluster Sizing for the Medical Diagnosis Pattern</h1><h2 id=tested-platforms>Tested Platforms</h2><p>The <strong>Medical Diagnosis</strong> pattern has been tested in the following Certified Cloud Providers.</p><p>| <strong>Certified Cloud Providers</strong> | 4.8 | 4.9 | 4.10 | 4.11 |
| :&mdash;- | :&mdash;- | :&mdash;- | :&mdash;- |
| Amazon Web Services | Tested | Tested | Tested | Tested |
| Google Compute | | |
| Microsoft Azure | | |</p><h2 id=general-openshift-minimum-requirements>General OpenShift Minimum Requirements</h2><p>OpenShift 4 has the following minimum requirements for sizing of nodes:</p><ul><li><strong>Minimum 4 vCPU</strong> (additional are strongly recommended).</li><li><strong>Minimum 16 GB RAM</strong> (additional memory is strongly recommended, especially if etcd is colocated on Control Planes).</li><li><strong>Minimum 40 GB</strong> hard disk space for the file system containing /var/.</li><li><strong>Minimum 1 GB</strong> hard disk space for the file system containing /usr/local/bin/.</li></ul><h3 id=medical-diagnosis-pattern-components><strong>Medical Diagnosis</strong> Pattern Components</h3><p>Here&rsquo;s an inventory of what gets deployed by the <strong>Medical Diagnosis</strong> pattern:</p><table><thead><tr><th style=text-align:left>Name</th><th style=text-align:left>Kind</th><th style=text-align:left>Namespace</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Medical Diagnosis Hub</td><td style=text-align:left>Application</td><td style=text-align:left>medical-diagnosis-hub</td><td style=text-align:left>Hub GitOps management</td></tr><tr><td style=text-align:left>Red Hat OpenShift GitOps</td><td style=text-align:left>Operator</td><td style=text-align:left>openshift-operators</td><td style=text-align:left>OpenShift GitOps</td></tr><tr><td style=text-align:left>Red Hat OpenShift Data Foundations</td><td style=text-align:left>Operator</td><td style=text-align:left>openshift-storage</td><td style=text-align:left>Cloud Native storage solution</td></tr><tr><td style=text-align:left>Red Hat AMQStreams (Apache Kafka)</td><td style=text-align:left>Operator</td><td style=text-align:left>openshift-operators</td><td style=text-align:left>AMQ Streams provides Apache Kafka access</td></tr><tr><td style=text-align:left>Red Hat OpenShift Serverless</td><td style=text-align:left>Operator</td><td style=text-align:left>- knative-eventing<br>- knative-serving</td><td style=text-align:left>Provides access to knative eventing and serving functions</td></tr></tbody></table><h3 id=medical-diagnosis-pattern-openshift-cluster-size>Medical Diagnosis Pattern OpenShift Cluster Size</h3><p>The Medical Diagnosis pattern has been tested with a defined set of configurations that represent the most common combinations that Red Hat OpenShift Container Platform (OCP) customers are using or deploying for the x86_64 architecture.</p><p>The OpenShift cluster for the <strong>Medical Diagnosis</strong> pattern needs to be sized a bit larger to support the compute and storage demands of OpenShift Data Foundations and other operators that make up the pattern. The above cluster sizing is close to a <strong>minimum</strong> size for an OpenShift cluster supporting this pattern. In the next few sections we take some snapshots of the cluster utilization while the <strong>Medical Diagnosis</strong> pattern is running. Keep in mind that resources will have to be added as more developers are working building their applications.</p><p>The OpenShift cluster is a standard deployment of 3 control plane nodes and 3 or more worker nodes.</p><table><thead><tr><th style=text-align:center>Node Type</th><th style=text-align:center>Number of nodes</th><th style=text-align:center>Cloud Provider</th><th style=text-align:center>Instance Type</th></tr></thead><tbody><tr><td style=text-align:center>Control Plane/Worker</td><td style=text-align:center>3</td><td style=text-align:center>Google Cloud</td><td style=text-align:center>n1-standard-8</td></tr><tr><td style=text-align:center>Control Plane/Worker</td><td style=text-align:center>3</td><td style=text-align:center>Amazon Cloud Services</td><td style=text-align:center>m5.2xlarge</td></tr><tr><td style=text-align:center>Control Plane/Worker</td><td style=text-align:center>3</td><td style=text-align:center>Microsoft Azure</td><td style=text-align:center>Standard_D8s_v3</td></tr></tbody></table><h3 id=aws-instance-types>AWS Instance Types</h3><p>The <strong>Medical Diagnosis</strong> pattern was tested with the highlighted AWS instances in <strong>bold</strong>. The OpenShift installer will let you know if the instance type meets the minimum requirements for a cluster.</p><p>The message that the openshift installer will give you will be similar to this message</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>INFO Credentials loaded from default AWS environment variables
</span></span><span style=display:flex><span>FATAL failed to fetch Metadata: failed to load asset &#34;Install Config&#34;: [controlPlane.platform.aws.type: Invalid value: &#34;m4.large&#34;: instance type does not meet minimum resource requirements of 4 vCPUs, controlPlane.platform.aws.type: Invalid value: &#34;m4.large&#34;: instance type does not meet minimum resource requirements of 16384 MiB Memory]
</span></span></code></pre></div><p>Below you can find a list of the AWS instance types that can be used to deploy the <strong>Medical Diagnosis</strong> pattern.</p><table><thead><tr><th style=text-align:center>Instance type</th><th style=text-align:center>Default vCPUs</th><th style=text-align:center>Memory (GiB)</th><th style=text-align:center>Hub</th><th style=text-align:center>Factory/Edge</th></tr></thead><tbody><tr><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center>3x3 OCP Cluster</td><td style=text-align:center>3 Node OCP Cluster</td></tr><tr><td style=text-align:center>m4.xlarge</td><td style=text-align:center>4</td><td style=text-align:center>16</td><td style=text-align:center>N</td><td style=text-align:center>N</td></tr><tr><td style=text-align:center><strong>m4.2xlarge</strong></td><td style=text-align:center>8</td><td style=text-align:center>32</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m4.4xlarge</td><td style=text-align:center>16</td><td style=text-align:center>64</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m4.10xlarge</td><td style=text-align:center>40</td><td style=text-align:center>160</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m4.16xlarge</td><td style=text-align:center>64</td><td style=text-align:center>256</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center><strong>m5.xlarge</strong></td><td style=text-align:center>4</td><td style=text-align:center>16</td><td style=text-align:center>Y</td><td style=text-align:center>N</td></tr><tr><td style=text-align:center><strong>m5.2xlarge</strong></td><td style=text-align:center>8</td><td style=text-align:center>32</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center><strong>m5.4xlarge</strong></td><td style=text-align:center>16</td><td style=text-align:center>64</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.8xlarge</td><td style=text-align:center>32</td><td style=text-align:center>128</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.12xlarge</td><td style=text-align:center>48</td><td style=text-align:center>192</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.16xlarge</td><td style=text-align:center>64</td><td style=text-align:center>256</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.24xlarge</td><td style=text-align:center>96</td><td style=text-align:center>384</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr></tbody></table><p>The OpenShift cluster is made of 3 Control Plane nodes and 3 Workers. For the node sizes we used the <strong>m5.4xlarge</strong> on AWS and this instance type met the minimum requirements to deploy the <strong>Medical Diagnosis</strong> pattern successfully.</p><p>To understand better what types of nodes you can use on other Cloud Providers we provide some of the details below.</p><h3 id=azure-instance-types>Azure Instance Types</h3><p>The <strong>Medical Diagnosis</strong> pattern was also deployed on Azure using the <strong>Standard_D8s_v3</strong> VM size. Below is a table of different VM sizes available for Azure. Keep in mind that due to limited access to Azure we only used the <strong>Standard_D8s_v3</strong> VM size.</p><p>The OpenShift cluster is made of 3 Control Plane nodes and 3 Workers.</p><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Sizes</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-general>General purpose</a></td><td style=text-align:left>B, Dsv3, Dv3, Dasv4, Dav4, DSv2, Dv2, Av2, DC, DCv2, Dv4, Dsv4, Ddv4, Ddsv4</td><td style=text-align:left>Balanced CPU-to-memory ratio. Ideal for testing and development, small to medium databases, and low to medium traffic web servers.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-compute>Compute optimized</a></td><td style=text-align:left>F, Fs, Fsv2, FX</td><td style=text-align:left>High CPU-to-memory ratio. Good for medium traffic web servers, network appliances, batch processes, and application servers.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-memory>Memory optimized</a></td><td style=text-align:left>Esv3, Ev3, Easv4, Eav4, Ev4, Esv4, Edv4, Edsv4, Mv2, M, DSv2, Dv2</td><td style=text-align:left>High memory-to-CPU ratio. Great for relational database servers, medium to large caches, and in-memory analytics.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-storage>Storage optimized</a></td><td style=text-align:left>Lsv2</td><td style=text-align:left>High disk throughput and IO ideal for Big Data, SQL, NoSQL databases, data warehousing and large transactional databases.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-gpu>GPU</a></td><td style=text-align:left>NC, NCv2, NCv3, NCasT4_v3, ND, NDv2, NV, NVv3, NVv4</td><td style=text-align:left>Specialized virtual machines targeted for heavy graphic rendering and video editing, as well as model training and inferencing (ND) with deep learning. Available with single or multiple GPUs.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-hpc>High performance compute</a></td><td style=text-align:left>HB, HBv2, HBv3, HC, H</td><td style=text-align:left>Our fastest and most powerful CPU virtual machines with optional high-throughput network interfaces (RDMA).</td></tr></tbody></table><p>For more information please refer to the <a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes>Azure VM Size Page</a>.</p><h3 id=google-cloud-gcp-instance-types>Google Cloud (GCP) Instance Types</h3><p>The <strong>Medical Diagnosis</strong> pattern was also deployed on GCP using the <strong>n1-standard-8</strong> VM size. Below is a table of different VM sizes available for GCP. Keep in mind that due to limited access to GCP we only used the <strong>n1-standard-8</strong> VM size.</p><p>The OpenShift cluster is made of 3 Control Plane and 3 Workers cluster.</p><p>The following table provides VM recommendations for different workloads.</p><p>| <strong>General purpose</strong> | <strong>Workload optimized</strong></p><table><thead><tr><th style=text-align:left>Cost-optimized</th><th style=text-align:left>Balanced</th><th style=text-align:left>Scale-out optimized</th><th style=text-align:left>Memory-optimized</th><th style=text-align:left>Compute-optimized</th><th style=text-align:left>Accelerator-optimized</th></tr></thead><tbody><tr><td style=text-align:left>E2</td><td style=text-align:left>N2, N2D, N1</td><td style=text-align:left>T2D</td><td style=text-align:left>M2, M1</td><td style=text-align:left>C2</td><td style=text-align:left>A2</td></tr><tr><td style=text-align:left>Day-to-day computing at a lower cost</td><td style=text-align:left>Balanced price/performance across a wide range of VM shapes</td><td style=text-align:left>Best performance/cost for scale-out workloads</td><td style=text-align:left>Ultra high-memory workloads</td><td style=text-align:left>Ultra high performance for compute-intensive workloads</td><td style=text-align:left>Optimized for high performance computing workloads</td></tr></tbody></table><p>For more information please refer to the <a href=https://cloud.google.com/compute/docs/machine-types>GCP VM Size Page</a>.</p></div></div></div><aside class="pf-l-grid__item pf-m-4-col pf-c-jump-links pf-m-vertical sticky pf-m-expandable pf-m-non-expandable-on-2xl" aria-label="Table of contents"><div class=pf-c-jump-links__header><div class=pf-c-jump-links__label><h1>Table of Contents</h1></div></div><nav id=TableOfContents><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#openshift-cluster-sizing-for-the-medical-diagnosis-pattern>OpenShift Cluster Sizing for the Medical Diagnosis Pattern</a><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#tested-platforms>Tested Platforms</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#general-openshift-minimum-requirements>General OpenShift Minimum Requirements</a></li></ul></li></ul></nav></aside></div></section><footer id=footer class="footer-dark pf-m-no-fill pf-l-flex footer-center"><div class=pf-l-flex__item><a href=//www.redhat.com target=top aria-label="Visit Red Hat.com"><img src=/images/RHlogo.svg alt="Red Hat logo" width=145px height=613px></a><span class=site-copyright>Copyright &copy; 2023 Red Hat, Inc.</span></div></footer></main></div></body></html>