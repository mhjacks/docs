<!doctype html><html><head><link rel=stylesheet href=https://hybrid-cloud-patterns.io/sass/patternfly.css><link rel=stylesheet href=https://hybrid-cloud-patterns.io/sass/patternfly-addons.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/solid.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/fontawesome.css><link rel=stylesheet href=/css/custom.css><title>Cluster Sizing | Hybrid Cloud Patterns</title></head><body><div class=pf-c-page><header class=pf-c-page__header><div class=pf-c-page__header-brand><a href=/ class=pf-c-page__header-brand-link><img src=/images/hybrid_cloud_patterns.png alt="Hybrid Cloud Patterns"></a></div><div class=pf-c-page__header-tools><nav class="pf-c-nav pf-m-horizontal" role=navigation><ul class=pf-c-nav__list><li class="pf-c-nav__item pf-m-current"><a class=pf-c-nav__link href=/patterns/ title=Patterns>Patterns</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/learn/ title=Learn>Learn</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/contribute/ title=Contribute>Contribute</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/blog/ title=Blog>Blog</a></li></ul></nav></div></header><div class=pf-c-page__sidebar><div class=pf-c-page__sidebar-body><div class=pf-c-nav><ul class=pf-c-nav__list><li class=pf-c-nav__item><a href=/patterns/ class=pf-c-nav__link><span class="pf-c-icon pf-m-md pf-m-inline"><span class=pf-c-icon__content><i class="fas fa-angle-left" aria-hidden=true></i></span></span>
<span style=padding-left:10px>Back to Patterns</span></a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/multicloud-gitops/ class=pf-c-nav__link>Multicloud GitOps</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/multicloud-gitops/getting-started/ class=pf-c-nav__link>Getting Started</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/multicloud-gitops/managed-cluster/ class=pf-c-nav__link>Managed cluster sites</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/multicloud-gitops/cluster-sizing/ class="pf-c-nav__link pf-m-current">Cluster Sizing</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/multicloud-gitops/imperative-actions/ class=pf-c-nav__link>Imperative Actions</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://hybrid-cloud-patterns.io/patterns/multicloud-gitops/ideas-for-customization/ class=pf-c-nav__link>Ideas for Customization</a></li></ul></div></div></div><main class=pf-c-page__main><section class=pf-c-page__main-section><div class="pf-l-grid pf-m-gutter"><div class="pf-l-grid__item pf-m-8-col"><div class=pf-c-content><div class=pf-c-content><h1 id=about-openshift-cluster-sizing-for-the-multicloud-gitops-pattern>About OpenShift cluster sizing for the Multicloud GitOps Pattern</h1><h3 id=support-matrix-for-multicloud-gitops-pattern>Support matrix for Multicloud GitOps pattern</h3><p>The Multicloud GitOps pattern has been tested in the following Certified Cloud Providers.</p><table><thead><tr><th style=text-align:left><strong>Certified Cloud Providers</strong></th><th style=text-align:left>4.8</th><th style=text-align:left>4.9</th><th style=text-align:left>4.10</th></tr></thead><tbody><tr><td style=text-align:left>Amazon Web Services</td><td style=text-align:left></td><td style=text-align:left>:heavy_check_mark:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>Microsoft Azure</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left>:heavy_check_mark:</td></tr><tr><td style=text-align:left>Google Cloud Platform</td><td style=text-align:left>:heavy_check_mark:</td><td style=text-align:left></td><td style=text-align:left></td></tr></tbody></table><h2 id=minimum-requirements-for-openshift-container-platform>Minimum requirements for OpenShift Container Platform</h2><p>OpenShift 4 has the following minimum requirements for sizing of nodes:</p><ul><li>Minimum 4 vCPU** (additional are strongly recommended)</li><li>Minimum 16 GB RAM** (additional memory is strongly recommended, especially if <code>etcd</code> is colocated on Control Planes)</li><li>Minimum 40 GB hard disk space for the file system containing <code>/var/</code></li><li>Minimum 1 GB hard disk space for the file system containing <code>/usr/local/bin/</code></li></ul><p>There is one application that comprises the Medical Diagnosis pattern. In addition, the Multicloud GitOps pattern also includes the Red Hat Advanced Cluster Management (RHACM) supporting operator that is installed by OpenShift GitOps using ArgoCD.</p><h3 id=understanding-multicloud-gitops-pattern-components>Understanding Multicloud GitOps pattern components</h3><p>Here&rsquo;s an inventory of what gets deployed by the Multicloud GitOps pattern on the Datacenter/Hub OpenShift cluster:</p><table><thead><tr><th style=text-align:left>Name</th><th style=text-align:left>Kind</th><th style=text-align:left>Namespace</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>multicloud-gitops-hub</td><td style=text-align:left>Application</td><td style=text-align:left>multicloud-gitops-hub</td><td style=text-align:left>Hub GitOps management</td></tr><tr><td style=text-align:left>Red Hat Advanced Cluster Management</td><td style=text-align:left>Operator</td><td style=text-align:left>open-cluster-management</td><td style=text-align:left>Advance Cluster Management</td></tr><tr><td style=text-align:left>Red Hat OpenShift GitOps</td><td style=text-align:left>Operator</td><td style=text-align:left>openshift-operators</td><td style=text-align:left>OpenShift GitOps</td></tr></tbody></table><h3 id=multicloud-gitops-pattern-with-openshift-datacenter-hub-cluster-size>Multicloud GitOps pattern with OpenShift datacenter hub cluster size</h3><p>The Multicloud GitOps pattern has been tested with a defined set of specifically tested configurations that represent the most common combinations that Red Hat OpenShift Container Platform (OCP) customers are using or deploying for the x86_64 architecture.</p><p>The datacenter hub OpenShift cluster is made up of the the following on the AWS deployment tested:</p><table><thead><tr><th style=text-align:left>Node Type</th><th style=text-align:center>Number of nodes</th><th style=text-align:left>Cloud Provider</th><th style=text-align:left>Instance Type</th></tr></thead><tbody><tr><td style=text-align:left>Control Plane</td><td style=text-align:center>4</td><td style=text-align:left>Amazon Web Services</td><td style=text-align:left>m5.xlarge</td></tr><tr><td style=text-align:left>Worker</td><td style=text-align:center>3</td><td style=text-align:left>Amazon Web Services</td><td style=text-align:left>m5.xlarge</td></tr></tbody></table><p>The datacenter hub OpenShift cluster needs to be a bit bigger than the Factory/Edge clusters because this is where the developers will be running pipelines to build and deploy the Multicloud GitOps pattern on the cluster. The above cluster sizing is close to a minimum size for a Datacenter HUB cluster. In the next few sections we take some snapshots of the cluster utilization while the Multicloud GitOps pattern is running. Keep in mind that resources will have to be added as more developers are working building their applications.</p><h4 id=datacenter-cluster-utilization>Datacenter cluster utilization</h4><p>Below is a snapshot of the OpenShift cluster utilization while running the Multicloud GitOps pattern:</p><table><thead><tr><th style=text-align:center>CPU</th><th style=text-align:center>Memory</th><th style=text-align:center>File System</th><th style=text-align:center>Network</th><th style=text-align:center>Pod Count</th></tr></thead></table><h3 id=multicloud-gitops-pattern-with-openshift-managed-datacenter-cluster-size>Multicloud GitOps pattern with OpenShift managed datacenter cluster size</h3><p>The OpenShift cluster is a standard datacenter deployment of 3 control plane nodes and 3 or more worker nodes.</p><table><thead><tr><th style=text-align:center>Node Type</th><th style=text-align:center>Number of nodes</th><th style=text-align:center>Cloud Provider</th><th style=text-align:center>Instance Type</th></tr></thead><tbody><tr><td style=text-align:center>Control Plane/Worker</td><td style=text-align:center>3</td><td style=text-align:center>Google Cloud</td><td style=text-align:center>n1-standard-8</td></tr><tr><td style=text-align:center>Control Plane/Worker</td><td style=text-align:center>3</td><td style=text-align:center>Amazon Cloud Services</td><td style=text-align:center>m5.2xlarge</td></tr><tr><td style=text-align:center>Control Plane/Worker</td><td style=text-align:center>3</td><td style=text-align:center>Microsoft Azure</td><td style=text-align:center>Standard_D8s_v3</td></tr></tbody></table><h4 id=managed-datacenter-cluster-utilization>Managed Datacenter Cluster Utilization</h4><p><strong>GCP</strong></p><p>This is a snapshot of a Google Cloud managed data center cluster running the production Multicloud GitOps pattern.</p><table><thead><tr><th style=text-align:center>CPU</th><th style=text-align:center>Memory</th><th style=text-align:center>File System</th><th style=text-align:center>Network</th><th style=text-align:center>Pod Count</th></tr></thead></table><p><strong>AWS</strong></p><p>This is a snapshot of a Amazon Web Services managed data center cluster running the production Multicloud GitOps pattern.</p><table><thead><tr><th style=text-align:center>CPU</th><th style=text-align:center>Memory</th><th style=text-align:center>File System</th><th style=text-align:center>Network</th><th style=text-align:center>Pod Count</th></tr></thead></table><p><strong>Azure</strong></p><p>This is a snapshot of an Azure managed data center cluster running the production Multicloud GitOps pattern.</p><table><thead><tr><th style=text-align:center>CPU</th><th style=text-align:center>Memory</th><th style=text-align:center>File System</th><th style=text-align:center>Network</th><th style=text-align:center>Pod Count</th></tr></thead></table><h3 id=aws-instance-types>AWS Instance Types</h3><p>The Multicloud GitOps pattern was tested with the highlighted AWS instances in <strong>bold</strong>. The OpenShift installer will let you know if the instance type meets the minimum requirements for a cluster.</p><p>The message that the openshift installer will give you will be similar to this message</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>INFO Credentials loaded from default AWS environment variables
</span></span><span style=display:flex><span>FATAL failed to fetch Metadata: failed to load asset &#34;Install Config&#34;: [controlPlane.platform.aws.type: Invalid value: &#34;m4.large&#34;: instance type does not meet minimum resource requirements of 4 vCPUs, controlPlane.platform.aws.type: Invalid value: &#34;m4.large&#34;: instance type does not meet minimum resource requirements of 16384 MiB Memory]
</span></span></code></pre></div><p>Below you can find a list of the AWS instance types that can be used to deploy the Multicloud GitOps pattern.</p><table><thead><tr><th style=text-align:center>Instance type</th><th style=text-align:center>Default vCPUs</th><th style=text-align:center>Memory (GiB)</th><th style=text-align:center>Datacenter</th><th style=text-align:center>Factory/Edge</th></tr></thead><tbody><tr><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center>3x3 OCP Cluster</td><td style=text-align:center>3 Node OCP Cluster</td></tr><tr><td style=text-align:center>m4.xlarge</td><td style=text-align:center>4</td><td style=text-align:center>16</td><td style=text-align:center>N</td><td style=text-align:center>N</td></tr><tr><td style=text-align:center><strong>m4.2xlarge</strong></td><td style=text-align:center>8</td><td style=text-align:center>32</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m4.4xlarge</td><td style=text-align:center>16</td><td style=text-align:center>64</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m4.10xlarge</td><td style=text-align:center>40</td><td style=text-align:center>160</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m4.16xlarge</td><td style=text-align:center>64</td><td style=text-align:center>256</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center><strong>m5.xlarge</strong></td><td style=text-align:center>4</td><td style=text-align:center>16</td><td style=text-align:center>Y</td><td style=text-align:center>N</td></tr><tr><td style=text-align:center><strong>m5.2xlarge</strong></td><td style=text-align:center>8</td><td style=text-align:center>32</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.4xlarge</td><td style=text-align:center>16</td><td style=text-align:center>64</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.8xlarge</td><td style=text-align:center>32</td><td style=text-align:center>128</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.12xlarge</td><td style=text-align:center>48</td><td style=text-align:center>192</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.16xlarge</td><td style=text-align:center>64</td><td style=text-align:center>256</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr><tr><td style=text-align:center>m5.24xlarge</td><td style=text-align:center>96</td><td style=text-align:center>384</td><td style=text-align:center>Y</td><td style=text-align:center>Y</td></tr></tbody></table><p>The OpenShift cluster is made of 4 Control Plane nodes and 3 Workers for the Datacenter and the Edge/managed data center cluster are made of 3 Control Plane and 3 Worker nodes. For the node sizes we used the <strong>m5.xlarge</strong> on AWS and this instance type met the minimum requirements to deploy the Multicloud GitOps pattern successfully on the Datacenter hub. On the managed data center cluster we used the <strong>m5.xlarge</strong> since the minimum cluster was comprised of 3 nodes. .</p><p>To understand better what types of nodes you can use on other Cloud Providers we provide some of the details below.</p><h3 id=azure-instance-types>Azure Instance Types</h3><p>The Multicloud GitOps pattern was also deployed on Azure using the <strong>Standard_D8s_v3</strong> VM size. Below is a table of different VM sizes available for Azure. Keep in mind that due to limited access to Azure we only used the <strong>Standard_D8s_v3</strong> VM size.</p><p>The OpenShift cluster is made of 3 Control Plane nodes and 3 Workers for the Datacenter cluster.</p><p>The OpenShift cluster is made of 3 Control Plane nodes and 3 or more workers for each of the managed data center clusters.</p><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Sizes</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-general>General purpose</a></td><td style=text-align:left>B, Dsv3, Dv3, Dasv4, Dav4, DSv2, Dv2, Av2, DC, DCv2, Dv4, Dsv4, Ddv4, Ddsv4</td><td style=text-align:left>Balanced CPU-to-memory ratio. Ideal for testing and development, small to medium databases, and low to medium traffic web servers.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-compute>Compute optimized</a></td><td style=text-align:left>F, Fs, Fsv2, FX</td><td style=text-align:left>High CPU-to-memory ratio. Good for medium traffic web servers, network appliances, batch processes, and application servers.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-memory>Memory optimized</a></td><td style=text-align:left>Esv3, Ev3, Easv4, Eav4, Ev4, Esv4, Edv4, Edsv4, Mv2, M, DSv2, Dv2</td><td style=text-align:left>High memory-to-CPU ratio. Great for relational database servers, medium to large caches, and in-memory analytics.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-storage>Storage optimized</a></td><td style=text-align:left>Lsv2</td><td style=text-align:left>High disk throughput and IO ideal for Big Data, SQL, NoSQL databases, data warehousing and large transactional databases.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-gpu>GPU</a></td><td style=text-align:left>NC, NCv2, NCv3, NCasT4_v3, ND, NDv2, NV, NVv3, NVv4</td><td style=text-align:left>Specialized virtual machines targeted for heavy graphic rendering and video editing, as well as model training and inferencing (ND) with deep learning. Available with single or multiple GPUs.</td></tr><tr><td style=text-align:left><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes-hpc>High performance compute</a></td><td style=text-align:left>HB, HBv2, HBv3, HC, H</td><td style=text-align:left>Our fastest and most powerful CPU virtual machines with optional high-throughput network interfaces (RDMA).</td></tr></tbody></table><p>For more information please refer to the <a href=https://docs.microsoft.com/en-us/azure/virtual-machines/sizes>Azure VM Size Page</a>.</p><h3 id=google-cloud-gcp-instance-types>Google Cloud (GCP) Instance Types</h3><p>The Multicloud GitOps pattern was also deployed on GCP using the <strong>n1-standard-8</strong> VM size. Below is a table of different VM sizes available for GCP. Keep in mind that due to limited access to GCP we only used the <strong>n1-standard-8</strong> VM size.</p><p>The OpenShift cluster is made of 3 Control Plane and 3 Workers for the Datacenter cluster.</p><p>The OpenShift cluster is made of 3 Nodes combining Control Plane/Workers for the Edge/managed data center cluster.</p><p>The following table provides VM recommendations for different workloads.</p><p>| <strong>General purpose</strong> | <strong>Workload optimized</strong></p><table><thead><tr><th style=text-align:left>Cost-optimized</th><th style=text-align:left>Balanced</th><th style=text-align:left>Scale-out optimized</th><th style=text-align:left>Memory-optimized</th><th style=text-align:left>Compute-optimized</th><th style=text-align:left>Accelerator-optimized</th></tr></thead><tbody><tr><td style=text-align:left>E2</td><td style=text-align:left>N2, N2D, N1</td><td style=text-align:left>T2D</td><td style=text-align:left>M2, M1</td><td style=text-align:left>C2</td><td style=text-align:left>A2</td></tr><tr><td style=text-align:left>Day-to-day computing at a lower cost</td><td style=text-align:left>Balanced price/performance across a wide range of VM shapes</td><td style=text-align:left>Best performance/cost for scale-out workloads</td><td style=text-align:left>Ultra high-memory workloads</td><td style=text-align:left>Ultra high performance for compute-intensive workloads</td><td style=text-align:left>Optimized for high performance computing workloads</td></tr></tbody></table><p>For more information please refer to the <a href=https://cloud.google.com/compute/docs/machine-types>GCP VM Size Page</a>.</p></div></div></div><div class="pf-l-grid__item pf-m-4-col"><nav class="pf-c-jump-links pf-m-vertical" aria-label=Contents><div class=pf-c-jump-links__main><div class=pf-c-jump-links__header><div class=pf-c-jump-links__label><h1>Table of Contents</h1></div></div><nav id=TableOfContents><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#about-openshift-cluster-sizing-for-the-multicloud-gitops-pattern>About OpenShift cluster sizing for the Multicloud GitOps Pattern</a><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#minimum-requirements-for-openshift-container-platform>Minimum requirements for OpenShift Container Platform</a></li></ul></li></ul></nav></div></nav></div></div></section></main></div><div><div style=padding:10px;text-align:center;color:#d2d2d2;background-color:#000>Copyright &copy; 2022 Red Hat, Inc.</div></div></body></html>